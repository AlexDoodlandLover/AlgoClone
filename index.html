<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fruitiger Aero Simulator</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: 'Helvetica', sans-serif;
      background: #e8f0fe;
    }
    canvas {
      display: block;
      background: #eef;
    }
    #toolbar {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 10;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px;
      border-radius: 10px;
    }
    button {
      background: #6c8cf4;
      color: white;
      border: none;
      border-radius: 8px;
      margin: 5px;
      padding: 10px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s;
    }
    button:hover {
      background: #4568db;
    }
    #speech {
      position: absolute;
      bottom: 10px;
      left: 10px;
      color: black;
      font-family: sans-serif;
      background: rgba(255,255,255,0.7);
      padding: 6px;
      border-radius: 6px;
      max-width: 300px;
    }
    #menu {
      position: absolute;
      top: 30px;
      left: 10px;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      padding: 10px;
      border-radius: 12px;
      display: none;
      transition: all 0.4s ease;
    }
    #menu button {
      background: #5ac7c4;
      color: white;
      font-size: 14px;
      padding: 8px;
    }
    #menu button:hover {
      background: #3e9999;
    }
    #backgroundMusic {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 5;
      display: none;
    }
  </style>
</head>
<body>
  <div id="toolbar">
    <button onclick="toggleMenu()">Play</button>
    <button onclick="toggleMenu()">Map Maker</button>
    <button onclick="toggleMenu()">Ragdoll Maker</button>
    <button onclick="togglePause()">Pause/Play</button>
  </div>
  <div id="speech"></div>
  <div id="menu">
    <button onclick="startPlayground()">Start Playground</button>
    <button onclick="openMapMaker()">Open Map Maker</button>
    <button onclick="openRagdollMaker()">Open Ragdoll Maker</button>
    <button onclick="toggleBackgroundMusic()">Toggle Music</button>
  </div>
  <canvas id="world"></canvas>  <audio id="backgroundMusic" loop>
    <source src="https://www.bensound.com/bensound-music/bensound-ukulele.mp3" type="audio/mp3" />
  </audio>  <script src="https://cdn.jsdelivr.net/npm/matter-js@0.19.0/build/matter.min.js"></script>  <script>
    const { Engine, Render, Runner, World, Bodies, Body, Mouse, MouseConstraint, Composite, Constraint, Events } = Matter;

    const canvas = document.getElementById("world");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const engine = Engine.create();
    const world = engine.world;

    const render = Render.create({
      canvas: canvas,
      engine: engine,
      options: {
        wireframes: false,
        background: '#eef',
        width: canvas.width,
        height: canvas.height
      }
    });

    Render.run(render);
    const runner = Runner.create();
    Runner.run(runner, engine);

    const ground = Bodies.rectangle(canvas.width / 2, canvas.height - 20, canvas.width, 40, {
      isStatic: true
    });
    World.add(world, ground);

    function addCircle() {
      const circle = Bodies.circle(Math.random() * canvas.width, 100, 30, {
        restitution: 0.8
      });
      World.add(world, circle);
    }

    function addBox() {
      const box = Bodies.rectangle(Math.random() * canvas.width, 100, 60, 60, {
        restitution: 0.6
      });
      World.add(world, box);
    }

    function addImage() {
      const texture = 'https://upload.wikimedia.org/wikipedia/commons/9/99/Unofficial_Algodoo_logo.png';
      const box = Bodies.rectangle(Math.random() * canvas.width, 100, 100, 100, {
        restitution: 0.5,
        render: {
          sprite: {
            texture: texture,
            xScale: 0.5,
            yScale: 0.5
          }
        }
      });
      World.add(world, box);
    }

    function speak(text) {
      const el = document.getElementById('speech');
      el.innerText = text;
      if ('speechSynthesis' in window) {
        const utter = new SpeechSynthesisUtterance(text);
        speechSynthesis.speak(utter);
      }
    }

    function togglePause() {
      if (engine.isRunning) {
        Runner.stop(runner);
      } else {
        Runner.run(runner, engine);
      }
    }

    function startPlayground() {
      document.getElementById('menu').style.display = 'none';
      World.clear(world);
      Engine.clear(engine);
      setupPlayground();
    }

    function setupPlayground() {
      // Placeholder for physics setup, tools, etc.
      speak("Playground loaded.");
    }

    function toggleMenu() {
      const menu = document.getElementById('menu');
      menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
    }

    function openMapMaker() {
      // Placeholder for map maker UI and functionality
      speak("Opening map maker...");
    }

    function openRagdollMaker() {
      // Placeholder for ragdoll maker UI and functionality
      speak("Opening ragdoll maker...");
    }

    function toggleBackgroundMusic() {
      const audio = document.getElementById('backgroundMusic');
      if (audio.paused) {
        audio.play();
      } else {
        audio.pause();
      }
    }

    window.addEventListener("resize", () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      Render.lookAt(render, {
        min: { x: 0, y: 0 },
        max: { x: canvas.width, y: canvas.height }
      });
    });
  </script></body>
</html>
